!function(o,e){"use strict";function t(e,t){var n=o.extend(!0,{duration:200,effect:{open:o.fn.fadeIn,close:o.fn.fadeOut},overlay:{color:"#888",opacity:.6,zIndex:9e3},closeClass:"plainmodal-close"},t);return n.zIndex=n.zIndex||n.overlay.zIndex+1,a||(a=o(window),r=o("<div />").css({position:"fixed",left:0,top:0,width:"100%",height:"100%",display:"none"}).appendTo(c=o("body")).click(l),o(document).focusin(function(e){h&&!h.has(e.target).length&&(s?s.focus():o(document.activeElement).blur())}).keydown(function(o){return 27===o.keyCode?l(o):void 0})),e.each(function(){var e=o(this),t={position:"fixed",display:"none",zIndex:n.zIndex};n.offset?("function"!=typeof n.offset&&(t.left=n.offset.left,t.top=n.offset.top),t.marginLeft=t.marginTop=""):(t.left=t.top="50%",t.marginLeft="-"+e.outerWidth()/2+"px",t.marginTop="-"+e.outerHeight()/2+"px"),n.closeClass&&e.find("."+n.closeClass).off("click",l).click(l),"function"==typeof n.open&&e.on("plainmodalopen",n.open),"function"==typeof n.close&&e.on("plainmodalclose",n.close),e.css(t).data("plainModal",n).appendTo(c)})}function n(e,n){var l,v,y,x,I,z;return null===h&&e.length&&(l=e.eq(0),(n||!(v=l.data("plainModal")))&&(v=t(l,n).data("plainModal")),y=c.get(0).style,d=y.overflow,x=c.prop("clientWidth"),I=c.prop("clientHeight"),c.css("overflow","hidden"),x-=c.prop("clientWidth"),I-=c.prop("clientHeight"),p=y.marginRight,u=y.marginBottom,0>x&&c.css("marginRight","+="+-x),0>I&&c.css("marginBottom","+="+-I),f=o(document.activeElement).blur(),s=null,g=a.scrollLeft(),m=a.scrollTop(),a.scroll(i),"function"==typeof v.offset&&(z=v.offset.call(l),l.css({left:z.left,top:z.top})),v.effect.open.call(l,v.duration||1,function(){l.find("a,input,select,textarea,button,object,area,img,map").each(function(){var e=o(this);return e.focus().get(0)===document.activeElement?(s=e,!1):void 0}),h=l.trigger("plainmodalopen")}),r.css({backgroundColor:v.overlay.color,zIndex:v.overlay.zIndex}).fadeTo(v.duration,v.overlay.opacity),h=0),e}function l(t){var n,l,s=t instanceof o.Event;return h&&(n=s?h:function(){var o=t.index(h);return o>-1?t.eq(o):e}(),n&&(l=n.data("plainModal"),l.effect.close.call(n,l.duration||1,function(){c.css({overflow:d,marginRight:p,marginBottom:u}),f&&f.length&&f.focus(),a.off("scroll",i).scrollLeft(g).scrollTop(m),n.trigger("plainmodalclose"),h=null}),r.fadeOut(l.duration),h=0)),s?(t.preventDefault(),!1):t}function i(o){return a.scrollLeft(g).scrollTop(m),o.preventDefault(),!1}var a,c,r,f,s,d,p,u,g,m,h=null;o.fn.plainModal=function(o,e){return"open"===o?n(this,e):"close"===o?l(this):t(this,o)}}(jQuery);